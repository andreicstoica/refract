@import "tw-animate-css";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Top fade for the scroll area */
.mask-top-fade {
	-webkit-mask-image: linear-gradient(to bottom, transparent 0px, rgba(0,0,0,0.2) 60px, rgba(0,0,0,0.6) 120px, black 180px);
	mask-image: linear-gradient(to bottom, transparent 0px, rgba(0,0,0,0.2) 60px, rgba(0,0,0,0.6) 120px, black 180px);
	/* Hide scrollbar */
	scrollbar-width: none; /* Firefox */
	-ms-overflow-style: none; /* IE and Edge */
}

/* Hide scrollbar for webkit browsers */
.mask-top-fade::-webkit-scrollbar {
	display: none;
}

html,
body {
	@apply bg-white dark:bg-gray-950;
	/* Relaxed global touch handling; page-level scroll lock is done via hooks */
	touch-action: auto;
	overscroll-behavior: none;
}

/* Allow touch-action only on scrollable elements */
textarea {
	touch-action: pan-y;
}

.scrollable {
	touch-action: pan-x pan-y;
}

:root {
	--radius: 0.625rem;
	--background: 0 0% 100%;
	--foreground: 0 0% 3.9%;
	--card: 0 0% 100%;
	--card-foreground: 0 0% 3.9%;
	--popover: 0 0% 100%;
	--popover-foreground: 0 0% 3.9%;
	--primary: 0 0% 9%;
	--primary-foreground: 0 0% 98%;
	--secondary: 0 0% 96.1%;
	--secondary-foreground: 0 0% 9%;
	--muted: 0 0% 96.1%;
	--muted-foreground: 0 0% 45.1%;
	--accent: 0 0% 96.1%;
	--accent-foreground: 0 0% 9%;
	--destructive: 0 84.2% 60.2%;
	--destructive-foreground: 0 0% 98%;
	--border: 0 0% 89.8%;
	--input: 0 0% 89.8%;
	--ring: 0 0% 3.9%;
	--chart-1: 12 76% 61%;
	--chart-2: 173 58% 39%;
	--chart-3: 197 37% 24%;
	--chart-4: 43 74% 66%;
	--chart-5: 27 87% 67%;
	--sidebar: 0 0% 98%;
	--sidebar-foreground: 0 0% 3.9%;
	--sidebar-primary: 0 0% 9%;
	--sidebar-primary-foreground: 0 0% 98%;
	--sidebar-accent: 0 0% 96.1%;
	--sidebar-accent-foreground: 0 0% 9%;
	--sidebar-border: 0 0% 89.8%;
	--sidebar-ring: 0 0% 3.9%;
	/* Ensure native UI (form controls, scrollbars) follow light theme by default */
	color-scheme: light;
}

.dark {
	--background: 0 0% 3.9%;
	--foreground: 0 0% 98%;
	--card: 0 0% 3.9%;
	--card-foreground: 0 0% 98%;
	--popover: 0 0% 3.9%;
	--popover-foreground: 0 0% 98%;
	--primary: 0 0% 98%;
	--primary-foreground: 0 0% 9%;
	--secondary: 0 0% 14.9%;
	--secondary-foreground: 0 0% 98%;
	--muted: 0 0% 14.9%;
	--muted-foreground: 0 0% 63.9%;
	--accent: 0 0% 14.9%;
	--accent-foreground: 0 0% 98%;
	--destructive: 0 62.8% 30.6%;
	--destructive-foreground: 0 0% 98%;
	--border: 0 0% 14.9%;
	--input: 0 0% 14.9%;
	--ring: 0 0% 83.1%;
	--chart-1: 220 70% 50%;
	--chart-2: 160 60% 45%;
	--chart-3: 30 80% 55%;
	--chart-4: 280 65% 60%;
	--chart-5: 340 75% 55%;
	--sidebar: 0 0% 3.9%;
	--sidebar-foreground: 0 0% 98%;
	--sidebar-primary: 220 70% 50%;
	--sidebar-primary-foreground: 0 0% 98%;
	--sidebar-accent: 0 0% 14.9%;
	--sidebar-accent-foreground: 0 0% 98%;
	--sidebar-border: 0 0% 14.9%;
	--sidebar-ring: 0 0% 83.1%;
	/* Ensure native UI follows dark theme when class is set */
	color-scheme: dark;
}

@layer base {
	* {
		@apply border-border outline-ring/50;
	}
	body {
		@apply font-sans bg-background text-foreground;
	}
}

/* Thinner scrollbar utility: apply to elements needing a slimmer bar */
.scrollbar-thin {
  scrollbar-width: thin; /* Firefox */
}
.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

/* Mobile performance optimizations */
.overlay-container {
  /* CSS containment for performance - isolates layout/paint/size calculations */
  contain: layout paint size;
}

.overlay-content {
  /* Only apply will-change when elements are actively being transformed */
  will-change: transform;
}

.overlay-content.static {
  /* Remove will-change when not actively scrolling to save memory */
  will-change: auto;
}

/* Keyboard-safe spacing utilities */
.keyboard-safe-bottom {
  /* Use the larger of safe-area-inset-bottom or our computed keyboard height */
  padding-bottom: max(env(safe-area-inset-bottom, 0px), var(--kb-safe, 0px));
}

.scroll-keyboard-safe {
  /* Add keyboard-safe scroll margin to prevent caret from being hidden */
  scroll-margin-bottom: var(--kb-safe, 0px);
}

/* Dynamic viewport height classes with progressive enhancement */
.full-vh {
  /* Prefer dynamic viewport units where supported */
  height: 100dvh;
}

/* Fallback for older iOS versions */
@supports not (height: 100dvh) {
  .full-vh {
    height: -webkit-fill-available;
    min-height: 100vh;
  }
}

/* Chip gutter spacing for edge-clipping prevention */
:root {
  --chip-gutter: 8px;
}
/* Activate this to make the chips have more gutter space on mobile
@media (max-width: 480px) {
	:root {
		--chip-gutter: 6px;
	}
} */

/* Theme-aware highlight colors */
:root {
  --hl-blue: 219 234 254;    /* blue-100 */
  --hl-purple: 233 213 255;  /* purple-100 */
  --hl-green: 209 250 229;   /* green-100 */
  --hl-amber: 254 215 170;   /* amber-100 */
  --hl-red: 254 202 202;     /* red-100 */
  --hl-pink: 252 231 243;    /* pink-100 */
  --hl-cyan: 207 250 254;    /* cyan-100 */
  --hl-lime: 236 252 203;    /* lime-100 */
  --hl-orange: 255 237 213;  /* orange-100 */
  --hl-indigo: 224 231 255;  /* indigo-100 */
  --hl-violet: 243 232 255;  /* violet-100 */
  --hl-teal: 204 251 241;    /* teal-100 */
}

.dark {
  --hl-blue: 30 58 138;      /* blue-800 */
  --hl-purple: 91 33 182;    /* purple-800 */
  --hl-green: 22 101 52;     /* green-800 */
  --hl-amber: 146 64 14;     /* amber-800 */
  --hl-red: 153 27 27;       /* red-800 */
  --hl-pink: 157 23 77;      /* pink-800 */
  --hl-cyan: 21 94 117;      /* cyan-800 */
  --hl-lime: 77 124 15;      /* lime-800 */
  --hl-orange: 154 52 18;    /* orange-800 */
  --hl-indigo: 55 48 163;    /* indigo-800 */
  --hl-violet: 91 33 182;    /* violet-800 */
  --hl-teal: 17 94 89;       /* teal-800 */
}

/* Highlight color utility classes */
.hl-blue { background-color: rgb(var(--hl-blue) / var(--hl-opacity, 0.25)); }
.hl-purple { background-color: rgb(var(--hl-purple) / var(--hl-opacity, 0.25)); }
.hl-green { background-color: rgb(var(--hl-green) / var(--hl-opacity, 0.25)); }
.hl-amber { background-color: rgb(var(--hl-amber) / var(--hl-opacity, 0.25)); }
.hl-red { background-color: rgb(var(--hl-red) / var(--hl-opacity, 0.25)); }
.hl-pink { background-color: rgb(var(--hl-pink) / var(--hl-opacity, 0.25)); }
.hl-cyan { background-color: rgb(var(--hl-cyan) / var(--hl-opacity, 0.25)); }
.hl-lime { background-color: rgb(var(--hl-lime) / var(--hl-opacity, 0.25)); }
.hl-orange { background-color: rgb(var(--hl-orange) / var(--hl-opacity, 0.25)); }
.hl-indigo { background-color: rgb(var(--hl-indigo) / var(--hl-opacity, 0.25)); }
.hl-violet { background-color: rgb(var(--hl-violet) / var(--hl-opacity, 0.25)); }
.hl-teal { background-color: rgb(var(--hl-teal) / var(--hl-opacity, 0.25)); }
